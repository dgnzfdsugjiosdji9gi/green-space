<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cost Estimator</title>
    <link rel="stylesheet" href="eslCost.css">
</head>
<body>
    <header class="top-bar">
        <div class="logo"><img src="greenspace.png" alt="edusn" height="60px"></div>
        <div class="buttons">
            <div class="dropdown">
                <span class="dropdown-btn btn">Link Collection ▾</span>
                <div class="dropdown-content">
                    <a href="supplier.html">Supplier</a>
                    <a href="result.html">Result</a>
                    <a href="eslCost.html">Cost Estimator</a>
                </div>
            </div>
            <a href="calculator.html" class="btn">Calculator</a>
        </div>
    </header>

    <nav class="nav-bar">
        <a href="index.html">Home</a>
        <a href="about.html">About Us</a>
        <a href="survey.html">Survey</a>
        <a href="SignUp.html" class="nav-btn">Sign In</a>
        <input type="text" class="search-bar" placeholder="Search...">
    </nav>
<br><br><br><br><br>


    <div class="container">
       <div class="title-hero">
            <h2>Cost Estimation Planner</h2>
            <p>Plan your project costs clearly and confidently</p>
       </div>

     

        <div class="box">
            <strong>Estimated Total Cost: <span id="totalCost">0</span> MMK</strong>
            <div class="progress-wrap">
                <div class="progress-bar">
                    <div id="progressFill"></div>
                </div>
                <small id="progressText">0% of budget used</small>
            </div>
            <p>Add your cost items:</p>
            
            <div class="add-item">
                <input type="text" id="itemName" placeholder="Item name">
                <input type="number" id="itemCost" placeholder="Cost in MMK" min="0">
                <button id="addBtn">Add Item</button>
            </div>
            
            <table id="costTable">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Cost (MMK)</th>
                        <th>Reason</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Items here -->
                </tbody>
            </table>
            
            <p style="font-size: 14px; color: #666; margin-top: 10px; margin-left: 125px;">
                Start by adding items above. The total will update.
            </p>
        </div>

        <label> Your Available Budget</label>
        <input type="number" id="budgetInput" placeholder="Enter your budget" min="0">
        <button id="compareBtn">Compare with Estimate</button>

        <div class="note" id="resultNote">
        Your budget will appear here! 
        </div>
          <div class="help-box">
         <h3>How's this Cost Estimatation work?</h3>
         <p class="help-short">List every item and its price. This helps your plan and ask for the right money.</p>
         <ul class="help-list">
           <li><strong>listing:</strong> list every item and its price</li>
           <li><strong>Calculation:</strong> calculate the total cost automatically</li>
           <li><strong>Budgeting:</strong> check if our budget is enough</li>
           <li><strong>Money Safe:</strong> avoid spending too much money</li>
           <li><strong>plaing:</strong> plan the project step by step</li>
         </ul>
         <p class="help-tip"><strong>Tip:</strong> If your budget is less then your item price, we prepear a <a href="Donate - GreenHands Park Revitalization.htm">DONATE</a> Page for you.</p>
         <p style="text-align: center;">We use a Cost Estimation Planner to plan our money.
It helps us know how much we need and how much we can spend.
This makes the project safer and easier to complete.</p>
       </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Green Space</h3>
                <p>The purpose of our project is to help revitalize our local park while promoting environmental conservation</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <a href="about.html">About Us</a>
                <a href="#">References</a>
                <a href="#">Our School</a>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>635J Yoma Avenue Street, Yangon</p>
                <p>+95793333550</p>
            </div>
        </div>
        <div class="copyright">
            © 2025 EDUSN Kamaryut campus year-9
        </div>
    </footer>

    <script>

        const itemNameInput = document.getElementById('itemName');
        const itemCostInput = document.getElementById('itemCost');
        const addBtn = document.getElementById('addBtn');
        const costTable = document.getElementById('costTable').getElementsByTagName('tbody')[0];
        const totalCostDisplay = document.getElementById('totalCost');
        const budgetInput = document.getElementById('budgetInput');
        const compareBtn = document.getElementById('compareBtn');
        const resultNote = document.getElementById('resultNote');


        let items = [];

      
        function addItem(name, cost, reason) {
            if (!name || !cost) {
                alert('Please enter both item name and cost');
                return;
            }

            const item = {
                name: name,
                cost: Number(cost),
                reason: reason || '',
                id: Date.now()
            };

            items.push(item);
            updateTable();
            updateTotal();
            clearInputs();
        }

        function removeItem(id) {
            items = items.filter(item => item.id !== id);
            updateTable();
            updateTotal();
        }


        function updateTable() {
            costTable.innerHTML = '';
            
            if (items.length === 0) {
                const row = costTable.insertRow();
                const cell = row.insertCell();
                cell.colSpan = 4;
                cell.innerHTML = "No items yet<br><small>Add your first cost above</small>";
                cell.style.fontSize = "15px";
                cell.style.textAlign = 'center';
                cell.style.color = '#666';
                cell.style.padding = '20px';
                return;
            }

            items.forEach(item => {
                const row = costTable.insertRow();

                const nameCell = row.insertCell();
                nameCell.textContent = item.name;

                const costCell = row.insertCell();
                costCell.textContent = item.cost.toLocaleString() + ' MMK';

                const reasonCell = row.insertCell();
                reasonCell.textContent = item.reason;

                const actionCell = row.insertCell();
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'Remove';
                removeBtn.className = 'remove-btn';
                removeBtn.onclick = () => removeItem(item.id);
                actionCell.appendChild(removeBtn);
            });
        }

        function updateTotal() {
            let total = items.reduce((sum, item) => sum + item.cost, 0);
            animateNumber(totalCostDisplay, total);
            return total;
        }

        function animateNumber(el, to) {
            let start = Number(el.textContent.replace(/,/g, '')) || 0;
            let startTime = null;

            function step(t) {
                if (!startTime) startTime = t;
                let progress = Math.min((t - startTime) / 400, 1);
                let value = Math.floor(start + (to - start) * progress);
                el.textContent = value.toLocaleString();
                if (progress < 1) requestAnimationFrame(step);
            }
            requestAnimationFrame(step);
        }


        function clearInputs() {
            itemNameInput.value = '';
            itemCostInput.value = '';
            itemNameInput.focus();
        }

        addBtn.addEventListener('click', () => {
            addItem(itemNameInput.value, itemCostInput.value);
        });

        itemCostInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addItem(itemNameInput.value, itemCostInput.value);
            }
        });

        compareBtn.addEventListener('click', () => {
            const budget = Number(budgetInput.value);
            const totalCost = updateTotal();

            resultNote.classList.remove('ok', 'not-ok');

            if (items.length === 0) {
                resultNote.innerHTML = "Please add some cost items first.";
                return;
            }

            if (!budget) {
                resultNote.innerHTML = "Please enter your budget.";
                return;
            }

            if (budget >= totalCost) {
                const extra = budget - totalCost;
                resultNote.classList.add('ok');
                resultNote.innerHTML = `
                    <strong>You have enough budget!</strong><br>
                    You will still have <strong>${extra.toLocaleString()} MMK</strong> left.<br><br>
                    Your project is fully doable with your current funds.
                `;
            } else {
                const shortage = totalCost - budget;
                resultNote.classList.add('not-ok');
                resultNote.innerHTML = `
                    <strong>You are short by ${shortage.toLocaleString()} MMK.</strong><br><br>
                    Here are some ideas:<br>
                    <ul>
                        <li>Build the project in phases</li>
                        <li>Ask the community for volunteer help</li>
                        <li>Search for extra funding or sponsors</li>
                    </ul>
                `;
            }

            const percent = (totalCost / budget) * 100;
            const fill = document.getElementById('progressFill');
            const text = document.getElementById('progressText');

            fill.style.width = Math.min(percent, 100) + "%";
            text.textContent = Math.round(percent) + "% of budget used";

            if (percent < 70) fill.style.background = "#4CAF50";
            else if (percent < 100) fill.style.background = "#FBC02D";
            else fill.style.background = "#E53935";
        });

        updateTable();
    </script>
</body>
</html>

